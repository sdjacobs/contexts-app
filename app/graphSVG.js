function graphSVG(){function c(e){var t=o.selectAll(".node");e?t.append("text").attr("dx",12).attr("dy",".35em").text(function(e){return e.label}):t.selectAll("text").remove()}function h(e){return+e>0?"_"+e:e.replace("'","_apos_")}function p(e){return d3.select("#"+h(e))}var e=undefined,t=undefined,n=[],r=!1,i=0,s=0,o=undefined,u=undefined,a=d3.behavior.zoom(),f=d3.scale.category20(),l=function(e){function i(){o.attr("transform","translate("+d3.event.translate+")"+" scale("+d3.event.scale+")")}var t=parseInt(e.style("width")),n=parseInt(e.style("height")),r=e.append("svg").attr("width",t).attr("height",n).attr("pointer-events","all").call(a.on("zoom",i));o=r.append("svg:g").attr("width",r.attr("width")).attr("height",r.attr("height")),u||(u=d3.layout.force().gravity(.05).distance(100).charge(-100).size([t,n]))};return l.start=function(){u.nodes(e).links(t).start();var n=o.selectAll(".link").data(t).enter().append("line").attr("class","link"),i=o.selectAll(".node").data(e).enter().append("g").attr("class","node").call(u.drag);i.append("circle").attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).attr("r",8).attr("fill",function(e){return e.color}).attr("id",function(e){return h(e.label)}).on("mouseover",function(n,r){d3.selectAll(".node").selectAll("circle").attr("fill-opacity","0.3"),p(n.label).attr("fill-opacity","1.0"),n.neighbors||(n.neighbors=findNeighbors(e,t,n)),n.neighbors.forEach(function(e){p(e.label).attr("fill-opacity","1.0")})}).on("mouseout",function(){d3.selectAll(".node").selectAll("circle").attr("fill-opacity","1.0")}).append("title").text(function(e){return e.label}),c(r);var s=10,a=s;return u.on("tick",function(){a==s?(n.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),i.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),a=0,l.registerstop&&u.alpha(0)):a++}),l},l.center=function(){a.scale(1),a.translate([0,0]),o.attr("transform","translate(0,0) scale(1)")},l.selectNode=function(e){var t=p(e.label);t.style("fill",f(e.label));var r=3,u=t.node().parentNode.getAttribute("transform"),l=u.match(/-?[0-9\.]+/g),c=-parseInt(l[0])*r+i/2,h=-parseInt(l[1])*r+s/2;o.transition().attr("transform","translate("+c+","+h+")scale("+r+")"),a.scale(r),a.translate([c,h]),n.push(e)},l.unSelectNode=function(e){var t=p(e.label);t.style("fill",e.oldcolor),n.remove(t)},l.stop=function(){u.alpha(0)},l.nodes=function(t){return arguments.length?(e=t,l):e},l.edges=function(e){return arguments.length?(t=e,l):t},l.selectedNodes=function(e){return arguments.length?(n=e,l):n},l.labels=function(e){return arguments.length?(r=e,c(e),l):r},l.force=function(e){return arguments.length?(u=e,l):u},l.redraw=function(){l.start()},l}function findNeighbors(e,t,n){var r=t.filter(function(e){return e.source==n}).map(function(e){return e.target}),s=t.filter(function(e){return e.target==n}).map(function(e){return e.source}),o=r;for(i in s)!s[i]in o&&o.push(s[i]);return o}define(["d3"],function(e){return graphSVG});