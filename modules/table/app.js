define(["d3","app/filepicker"],function(e,t){function n(e){var t={};return e.split("\n").forEach(function(e){if(e.startsWith("#"))return;var n=e.split("	");t[n[0]]=n.splice(1).sort()}),t}return function(r,s){function o(t){function o(){var t=document.querySelector("#t_selectText").checked,n=e.select("#t_selectedWordsText"),r=e.select("#t_selectedWordsExported");n.attr("disabled",t?null:!0),r.style("color",t?"grey":"black");var i=n.node().value;i&&(i=i.split(","));var s=t?i:r.datum();s&&f(s)}function u(e,t){var n=0,r=0,i=[];while(n<e.length&&r<t.length)e[n]==t[r]&&i.push(e[n]),e[n]<t[r]?n++:r++;return i}function a(e){var t=e[0];for(i=1;i<e.length;i++)t=u(t,e[i]);return t}function f(e){n.select("#t_wordList").text(e),n.selectAll("tr").remove();var r=e.map(function(e){return t[e]}),i=a(r);n.selectAll("tr").data(i).enter().append("tr").text(function(e){return e})}var n=e.select(r).select("table");n.empty()&&(n=e.select(r).append("table"),n.append("thead").html("Shared contexts: <span id=t_wordList>")),e.selectAll("#t_selectText, #t_selectExported").attr("disabled",null).on("click",o),e.select("#t_selectedWordsText").on("change",function(){var t=e.event.target.value;f(t.split(","))}),s.on_init("wordlist",function(t){e.select("#t_selectedWordsExported").text(t).datum(t),document.querySelector("#t_selectExported").checked&&f(t)})}e.select("#t_dataFile").call(t(),["english-brown_1000_from-word-to-contexts.txt"],o,n)}});