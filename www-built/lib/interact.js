/**
 * interact.js v1.1.3
 *
 * Copyright (c) 2012, 2013, 2014 Taye Adeyemi <dev@taye.me>
 * Open source under the MIT License.
 * https://raw.github.com/taye/interact.js/master/LICENSE
 */

(function(){function D(){}function P(e){if(!e||typeof e!="object")return!1;var t=Z(e)||window;return/object|function/.test(typeof t.Element)?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"}function H(e){return!!e&&!!e.Window&&e instanceof e.Window}function B(e){return j(e)&&typeof e.length!==undefined&&F(e.splice)}function j(e){return!!e&&typeof e=="object"}function F(e){return typeof e=="function"}function I(e){return typeof e=="number"}function q(e){return typeof e=="boolean"}function R(e){return typeof e=="string"}function U(t){return R(t)?(e.querySelector(t),!0):!1}function z(e,t){for(var n in t)e[n]=t[n];return e}function W(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp}function X(e,t,n){t||(n.pointerIds.length>1?t=nt(n.pointers):t=n.pointers[0]),J(t,a,n),e.page.x=a.x,e.page.y=a.y,K(t,a,n),e.client.x=a.x,e.client.y=a.y,e.timeStamp=(new Date).getTime()}function V(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=(new Date).getTime()-t.timeStamp;var r=Math.max(e.timeStamp/1e3,.001);e.page.speed=u(e.page.x,e.page.y)/r,e.page.vx=e.page.x/r,e.page.vy=e.page.y/r,e.client.speed=u(e.client.x,e.page.y)/r,e.client.vx=e.client.x/r,e.client.vy=e.client.y/r}function $(e,t,n){return n=n||{},e=e||"page",n.x=t[e+"X"],n.y=t[e+"Y"],n}function J(e,t,n){return t=t||{},e instanceof xt?/inertiastart/.test(e.type)?(n=n||e.interaction,z(t,n.inertiaStatus.upCoords.page),t.x+=n.inertiaStatus.sx,t.y+=n.inertiaStatus.sy):(t.x=e.pageX,t.y=e.pageY):C?($("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):$("page",e,t),t}function K(e,t,n){return t=t||{},e instanceof xt?/inertiastart/.test(e.type)?(z(t,n.inertiaStatus.upCoords.client),t.x+=n.inertiaStatus.sx,t.y+=n.inertiaStatus.sy):(t.x=e.clientX,t.y=e.clientY):$(C?"screen":"client",e,t),t}function Q(e){return e=e||window,{x:e.scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function G(e){return I(e.pointerId)?e.pointerId:e.identifier}function Y(e){return e instanceof r?e.correspondingUseElement:e}function Z(e){if(H(e))return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow}function et(e){var n=k?{x:0,y:0}:Q(Z(e)),r=e instanceof t?e.getBoundingClientRect():e.getClientRects()[0];return r&&{left:r.left+n.x,right:r.right+n.x,top:r.top+n.y,bottom:r.bottom+n.y,width:r.width||r.right-r.left,height:r.heigh||r.bottom-r.top}}function tt(e){var t=[];return B(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function nt(e){var t=tt(e);return{pageX:(t[0].pageX+t[1].pageX)/2,pageY:(t[0].pageY+t[1].pageY)/2,clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function rt(e){if(!e.length&&!(e.touches&&e.touches.length>1))return;var t=tt(e),n=Math.min(t[0].pageX,t[1].pageX),r=Math.min(t[0].pageY,t[1].pageY),i=Math.max(t[0].pageX,t[1].pageX),s=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:r,left:n,top:r,width:i-n,height:s-r}}function it(e,t){t=t||d.deltaSource;var n=t+"X",r=t+"Y",i=tt(e),s=i[0][n]-i[1][n],o=i[0][r]-i[1][r];return u(s,o)}function st(e,t,n){n=n||d.deltaSource;var r=n+"X",i=n+"Y",s=tt(e),o=s[0][r]-s[1][r],u=s[0][i]-s[1][i],a=180*Math.atan(u/o)/Math.PI;if(I(t)){var f=a-t,l=f%360;l>315?a-=360+a/360|0:l>135?a-=180+a/360|0:l<-315?a+=360+a/360|0:l<-135&&(a+=180+a/360|0)}return a}function ot(e,t){var n=e?e.options.origin:d.origin;return n==="parent"?n=t.parentNode:n==="self"?n=e.getRect(t):U(n)&&(n=ct(t,n)||{x:0,y:0}),F(n)&&(n=n(e&&t)),P(n)&&(n=et(n)),n.x="x"in n?n.x:n.left,n.y="y"in n?n.y:n.top,n}function ut(e,t,n,r){var i=1-e;return i*i*t+2*i*e*n+e*e*r}function at(e,t,n,r,i,s,o){return{x:ut(o,e,n,i),y:ut(o,t,r,s)}}function ft(e,t,n,r){return e/=r,-n*e*(e-2)+t}function lt(e,t){while(t=t.parentNode)if(t===e)return!0;return!1}function ct(e,t){var n=e.parentNode;while(P(n)){if(Rt(n,t))return n;n=n.parentNode}return null}function ht(e,t){return e._context===t.ownerDocument||lt(e._context,t)}function pt(e,t,n){var r=e.options.ignoreFrom;return!r||!P(n)||n===t.parentNode?!1:R(r)?Rt(n,r)||pt(e,n.parentNode):P(r)?n===r||lt(r,n):!1}function dt(e,t,n){var r=e.options.allowFrom;return r?!P(n)||n===t.parentNode?!1:R(r)?Rt(n,r)||dt(e,n.parentNode):P(r)?n===r||lt(r,n):!1:!0}function vt(e,t){if(!t)return!1;var n=t.options.dragAxis;return e==="xy"||n==="xy"||n===e}function mt(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),t!=="gesture"&&n.snapEnabled&&qt(n.snap.actions,t)}function gt(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),n.restrictEnabled&&n.restrict[t]}function yt(e,t,n){n=/resize/.test(n)?"resize":n;var r=e.options,i=r[n+"Max"],s=r[n+"MaxPerElement"],o=0,u=0,a=0;for(var f=0,l=c.length;f<l;f++){var h=c[f],p=/resize/.test(h.prepared)?"resize":h.prepared,d=h.interacting();if(!d)continue;o++;if(o>=w)return!1;if(h.target!==e)continue;u+=p===n|0;if(u>=i)return!1;if(h.element===t){a++;if(p!==n||a>=s)return!1}}return w>0}function bt(e){var r,s=e[0],o=s?0:-1,u,a=[],f=[],l,c,h;for(c=1;c<e.length;c++){r=e[c];if(!r||r===s)continue;if(!s){s=r,o=c;continue}if(r.parentNode===r.ownerDocument)continue;if(s.parentNode===r.ownerDocument){s=r,o=c;continue}if(!a.length){u=s;while(u.parentNode&&u.parentNode!==u.ownerDocument)a.unshift(u),u=u.parentNode}if(s instanceof i&&r instanceof t&&!(r instanceof n)){if(r===s.parentNode)continue;u=r.ownerSVGElement}else u=r;f=[];while(u.parentNode!==u.ownerDocument)f.unshift(u),u=u.parentNode;h=0;while(f[h]&&f[h]===a[h])h++;var p=[f[h-1],f[h],a[h]];l=p[0].lastChild;while(l){if(l===p[1]){s=r,o=c,a=[];break}if(l===p[2])break;l=l.previousSibling}}return o}function wt(){this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared=null,this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null};if(F(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var e=this;this.boundInertiaFrame=function(){return e.inertiaFrame()},this.boundSmoothEndFrame=function(){return e.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffset={x:0,y:0},this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,anchors:[],paths:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,c.push(this)}function Et(e,t,n){var r=0,i=c.length,s=/mouse/i.test(e.pointerType||t)||e.pointerType===4,o,u=G(e);if(/down|start/i.test(t))for(r=0;r<i;r++){o=c[r];var a=n;if(o.inertiaStatus.active&&o.target.options.inertia.allowResume&&o.mouse===s)while(a){if(a===o.element)return o.pointers[0]&&o.removePointer(o.pointers[0]),o.addPointer(e),o;a=a.parentNode}}if(s||!m&&!g){for(r=0;r<i;r++)if(c[r].mouse&&!c[r].inertiaStatus.active)return c[r];for(r=0;r<i;r++)if(c[r].mouse&&(!/down/.test(t)||!c[r].inertiaStatus.active))return o;return o=new wt,o.mouse=!0,o}for(r=0;r<i;r++)if(qt(c[r].pointerIds,u))return c[r];if(/up|end|out/i.test(t))return null;for(r=0;r<i;r++){o=c[r];if((!o.prepared||o.target.gesturable())&&!o.interacting()&&(!!s||!o.mouse))return o.addPointer(e),o}return new wt}function St(e){return function(t){var n,r=Y(t.target),i=Y(t.currentTarget),s;if(m&&/touch/.test(t.type)){b=(new Date).getTime();for(s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];n=Et(o,t.type,r);if(!n)continue;n[e](o,t,r,i)}}else{if(!g&&/mouse/.test(t.type)){for(s=0;s<c.length;s++)if(!c[s].mouse&&c[s].pointerIsDown)return;if((new Date).getTime()-b<500)return}n=Et(t,t.type,r);if(!n)return;n[e](t,t,r,i)}}}function xt(e,t,n,r,i,s){var o,a,f=e.target,l=e.snapStatus,c=e.restrictStatus,h=e.pointers,p=(f&&f.options||d).deltaSource,v=p+"X",m=p+"Y",g=f?f.options:d,y=ot(f,i),b=r==="start",w=r==="end",E=b?e.startCoords:e.curCoords;i=i||e.element,a=z({},E.page),o=z({},E.client),a.x-=y.x,a.y-=y.y,o.x-=y.x,o.y-=y.y,mt(f,n)&&(!b||!g.snap.elementOrigin)&&(this.snap={range:l.range,locked:l.locked,x:l.snappedX,y:l.snappedY,realX:l.realX,realY:l.realY,dx:l.dx,dy:l.dy},l.locked&&(a.x+=l.dx,a.y+=l.dy,o.x+=l.dx,o.y+=l.dy)),gt(f,n)&&(!b||!g.restrict.elementRect)&&c.restricted&&(a.x+=c.dx,a.y+=c.dy,o.x+=c.dx,o.y+=c.dy,this.restrict={dx:c.dx,dy:c.dy}),this.pageX=a.x,this.pageY=a.y,this.clientX=o.x,this.clientY=o.y,this.x0=e.startCoords.page.x,this.y0=e.startCoords.page.y,this.clientX0=e.startCoords.client.x,this.clientY0=e.startCoords.client.y,this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.button=t.button,this.target=i,this.t0=e.downTimes[0],this.type=n+(r||""),this.interaction=e,this.interactable=f;var S=e.inertiaStatus;S.active&&(this.detail="inertia"),s&&(this.relatedTarget=s),w||n==="drop"?p==="client"?(this.dx=o.x-e.startCoords.client.x,this.dy=o.y-e.startCoords.client.y):(this.dx=a.x-e.startCoords.page.x,this.dy=a.y-e.startCoords.page.y):b?(this.dx=0,this.dy=0):r==="inertiastart"?(this.dx=e.prevEvent.dx,this.dy=e.prevEvent.dy):p==="client"?(this.dx=o.x-e.prevEvent.clientX,this.dy=o.y-e.prevEvent.clientY):(this.dx=a.x-e.prevEvent.pageX,this.dy=a.y-e.prevEvent.pageY),e.prevEvent&&e.prevEvent.detail==="inertia"&&!S.active&&g.inertia.zeroResumeDelta&&(S.resumeDx+=this.dx,S.resumeDy+=this.dy,this.dx=this.dy=0),n==="resize"?g.squareResize||t.shiftKey?(e.resizeAxes==="y"?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=e.resizeAxes,e.resizeAxes==="x"?this.dy=0:e.resizeAxes==="y"&&(this.dx=0)):n==="gesture"&&(this.touches=[h[0],h[1]],b?(this.distance=it(h,p),this.box=rt(h),this.scale=1,this.ds=0,this.angle=st(h,undefined,p),this.da=0):w||t instanceof xt?(this.distance=e.prevEvent.distance,this.box=e.prevEvent.box,this.scale=e.prevEvent.scale,this.ds=this.scale-1,this.angle=e.prevEvent.angle,this.da=this.angle-e.gesture.startAngle):(this.distance=it(h,p),this.box=rt(h),this.scale=this.distance/e.gesture.startDistance,this.angle=st(h,e.gesture.prevAngle,p),this.ds=this.scale-e.gesture.prevScale,this.da=this.angle-e.gesture.prevAngle));if(b)this.timeStamp=e.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if(r==="inertiastart")this.timeStamp=e.prevEvent.timeStamp,this.dt=e.prevEvent.dt,this.duration=e.prevEvent.duration,this.speed=e.prevEvent.speed,this.velocityX=e.prevEvent.velocityX,this.velocityY=e.prevEvent.velocityY;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-e.prevEvent.timeStamp,this.duration=this.timeStamp-e.downTimes[0];if(t instanceof xt){var x=this[v]-e.prevEvent[v],T=this[m]-e.prevEvent[m],N=this.dt/1e3;this.speed=u(x,T)/N,this.velocityX=x/N,this.velocityY=T/N}else this.speed=e.pointerDelta[p].speed,this.velocityX=e.pointerDelta[p].vx,this.velocityY=e.pointerDelta[p].vy}if((w||r==="inertiastart")&&e.prevEvent.speed>600&&this.timeStamp-e.prevEvent.timeStamp<150){var C=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI,k=22.5;C<0&&(C+=360);var L=135-k<=C&&C<225+k,A=225-k<=C&&C<315+k,O=!L&&(315-k<=C||C<45+k),M=!A&&45-k<=C&&C<135+k;this.swipe={up:A,down:M,left:L,right:O,angle:C,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}}function Tt(){this.originalEvent.preventDefault()}function Nt(e,t,n){var r=this.getRect(n),i,s,o=null,u=z({},t.curCoords.page),a=this.options;return r?(S.resize&&a.resizable&&(i=a.resizeAxis!=="y"&&u.x>r.right-y,s=a.resizeAxis!=="x"&&u.y>r.bottom-y),t.resizeAxes=(i?"x":"")+(s?"y":""),o=t.resizeAxes?"resize"+t.resizeAxes:S.drag&&a.draggable?"drag":null,S.gesture&&t.pointerIds.length>=2&&!t.dragging&&!t.resizing&&(o="gesture"),o):null}function Ct(e,t){if(!R(e))return null;var n=e.search("resize")!==-1?"resize":e,r=t;if((n==="resize"&&r.resizable||e==="drag"&&r.draggable||e==="gesture"&&r.gesturable)&&S[n]){if(e==="resize"||e==="resizeyx")e="resizexy";return e}return null}function _t(e,t){var n={},r=p[e.type],i=e.target;t=t?!0:!1;for(var s in e)n[s]=e[s];n.originalEvent=e,n.preventDefault=Tt;while(i&&i.ownerDocument&&i!==i.ownerDocument){for(var o=0;o<r.selectors.length;o++){var u=r.selectors[o],a=r.contexts[o];if(Rt(i,u)&&lt(a,e.target)&&lt(a,i)){var f=r.listeners[o];n.currentTarget=i;for(var l=0;l<f.length;l++)f[l][1]===t&&f[l][0](n)}}i=i.parentNode}}function Dt(e){return _t.call(this,e,!0)}function Pt(e,t){return l.get(e,t)||new Bt(e,t)}function Ht(e){for(var t in d)e.hasOwnProperty(t)&&typeof e[t]==typeof d[t]&&(this[t]=e[t])}function Bt(e,t){this._element=e,this._iEvents=this._iEvents||{};var n;if(U(e)){this.selector=e;var r=t&&t.context;n=r?Z(r):window,r&&(n.Node?r instanceof n.Node:P(r)||r===n.document)&&(this._context=r)}else n=Z(e),P(e,n)&&(s?(_.add(this._element,o.down,kt.pointerDown),_.add(this._element,o.move,kt.pointerHover)):(_.add(this._element,"mousedown",kt.pointerDown),_.add(this._element,"mousemove",kt.pointerHover),_.add(this._element,"touchstart",kt.pointerDown),_.add(this._element,"touchmove",kt.pointerHover)));this._doc=n.document,qt(f,this._doc)||Ft(this._doc),l.push(this),this.set(t)}function jt(e){for(var t=0;t<c.length;t++)c[t].pointerEnd(e,e)}function Ft(e){if(qt(f,e))return;var t=e.defaultView||e.parentWindow;for(var n in p)_.add(e,n,_t),_.add(e,n,Dt,!0);s?(s===t.MSPointerEvent?o={up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:o={up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},_.add(e,o.down,kt.selectorDown),_.add(e,o.move,kt.pointerMove),_.add(e,o.over,kt.pointerOver),_.add(e,o.out,kt.pointerOut),_.add(e,o.up,kt.pointerUp),_.add(e,o.cancel,kt.pointerCancel),_.add(e,o.move,v.edgeMove)):(_.add(e,"mousedown",kt.selectorDown),_.add(e,"mousemove",kt.pointerMove),_.add(e,"mouseup",kt.pointerUp),_.add(e,"mouseover",kt.pointerOver),_.add(e,"mouseout",kt.pointerOut),_.add(e,"touchstart",kt.selectorDown),_.add(e,"touchmove",kt.pointerMove),_.add(e,"touchend",kt.pointerUp),_.add(e,"touchcancel",kt.pointerCancel),_.add(e,"mousemove",v.edgeMove),_.add(e,"touchmove",v.edgeMove)),_.add(t,"blur",jt);try{if(t.frameElement){var r=t.frameElement.ownerDocument,i=r.defaultView;_.add(r,"mouseup",kt.pointerEnd),_.add(r,"touchend",kt.pointerEnd),_.add(r,"touchcancel",kt.pointerEnd),_.add(r,"pointerup",kt.pointerEnd),_.add(r,"MSPointerUp",kt.pointerEnd),_.add(i,"blur",jt)}}catch(u){Pt.windowParentError=u}_.useAttachEvent&&(_.add(e,"selectstart",function(e){var t=c[0];t.currentAction()&&t.checkAndPreventDefault(e)}),_.add(e,"dblclick",St("ie8Dblclick"))),f.push(e)}function It(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function qt(e,t){return It(e,t)!==-1}function Rt(e,t,n){return A?A(e,t,n):e[L](t)}var e=window.document,t=window.SVGElement||D,n=window.SVGSVGElement||D,r=window.SVGElementInstance||D,i=window.HTMLElement||window.Element,s=window.PointerEvent||window.MSPointerEvent,o,u=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},a={},f=[],l=[],c=[],h=!1,p={},d={draggable:!1,dragAxis:"xy",dropzone:!1,accept:null,dropOverlap:"pointer",resizable:!1,squareResize:!1,resizeAxis:"xy",gesturable:!1,dragMax:1,resizeMax:1,gestureMax:1,dragMaxPerElement:1,resizeMaxPerElement:1,gestureMaxPerElement:1,pointerMoveTolerance:1,actionChecker:null,styleCursor:!0,preventDefault:"auto",snap:{mode:"grid",endOnly:!1,actions:["drag"],range:Infinity,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],elementOrigin:null,arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$|^elementOrigin$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:!1,restrict:{drag:null,resize:null,gesture:null,endOnly:!1},restrictEnabled:!1,autoScroll:{container:null,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:!1,inertia:{resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!1,smoothEndDuration:300,actions:["drag","resize"],numberTypes:/^resistance$|^minSpeed$|^endSpeed$|^smoothEndDuration$/,arrayTypes:/^actions$/,boolTypes:/^(allowResume|zeroResumeDelta)$/},inertiaEnabled:!1,origin:{x:0,y:0},deltaSource:"page"},v={interaction:null,i:null,x:0,y:0,scroll:function(){var e=v.interaction.target.options.autoScroll,t=e.container||Z(v.interaction.element),n=(new Date).getTime(),r=(n-v.prevTime)/1e3,i=e.speed*r;i>=1&&(H(t)?t.scrollBy(v.x*i,v.y*i):t&&(t.scrollLeft+=v.x*i,t.scrollTop+=v.y*i),v.prevTime=n),v.isScrolling&&(M(v.i),v.i=O(v.scroll))},edgeMove:function(e){var t,n,r=!1;for(var i=0;i<c.length;i++){t=c[i],n=t.target;if(n&&n.options.autoScrollEnabled&&(t.dragging||t.resizing)){r=!0;break}}if(!r)return;var s,o,u,a,f=n.options.autoScroll,l=f.container||Z(t.element);if(H(l))a=e.clientX<v.margin,s=e.clientY<v.margin,o=e.clientX>l.innerWidth-v.margin,u=e.clientY>l.innerHeight-v.margin;else{var h=et(l);a=e.clientX<h.left+v.margin,s=e.clientY<h.top+v.margin,o=e.clientX>h.right-v.margin,u=e.clientY>h.bottom-v.margin}v.x=o?1:a?-1:0,v.y=u?1:s?-1:0,v.isScrolling||(v.margin=f.margin,v.speed=f.speed,v.start(t))},isScrolling:!1,prevTime:0,start:function(e){v.isScrolling=!0,M(v.i),v.interaction=e,v.prevTime=(new Date).getTime(),v.i=O(v.scroll)},stop:function(){v.isScrolling=!1,M(v.i)}},m="ontouchstart"in window||window.DocumentTouch&&e instanceof window.DocumentTouch,g=!!s,y=m||g?20:10,b=0,w=1,E={drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",gesture:""},S={drag:!0,resize:!0,gesture:!0},x="onmousewheel"in e?"mousewheel":"wheel",T=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],N={},C=navigator.appName=="Opera"&&m&&navigator.userAgent.match("Presto"),k=/iP(hone|od|ad)/.test(navigator.platform)&&/OS [1-7][^\d]/.test(navigator.appVersion),L="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",A,O=window.requestAnimationFrame,M=window.cancelAnimationFrame,_=function(){function u(n,u,a,h){var p=It(i,n),d=s[p];d||(d={events:{},typeCount:0},p=i.push(n)-1,s.push(d),o.push(e?{supplied:[],wrapped:[],useCount:[]}:null)),d.events[u]||(d.events[u]=[],d.typeCount++);if(!qt(d.events[u],a)){var v;if(e){var m=o[p],g=It(m.supplied,a),y=m.wrapped[g]||function(e){e.immediatePropagationStopped||(e.target=e.srcElement,e.currentTarget=n,e.preventDefault=e.preventDefault||f,e.stopPropagation=e.stopPropagation||l,e.stopImmediatePropagation=e.stopImmediatePropagation||c,/mouse|click/.test(e.type)&&(e.pageX=e.clientX+Z(n).document.documentElement.scrollLeft,e.pageY=e.clientY+Z(n).document.documentElement.scrollTop),a(e))};v=n[t](r+u,y,Boolean(h)),g===-1?(m.supplied.push(a),m.wrapped.push(y),m.useCount.push(1)):m.useCount[g]++}else v=n[t](u,a,h||!1);return d.events[u].push(a),v}}function a(t,u,f,l){var c,h=It(i,t),p=s[h],d,v,m=f;if(!p||!p.events)return;e&&(d=o[h],v=It(d.supplied,f),m=d.wrapped[v]);if(u==="all"){for(u in p.events)p.events.hasOwnProperty(u)&&a(t,u,"all");return}if(p.events[u]){var g=p.events[u].length;if(f==="all")for(c=0;c<g;c++)a(t,u,p.events[u][c],Boolean(l));else for(c=0;c<g;c++)if(p.events[u][c]===f){t[n](r+u,m,l||!1),p.events[u].splice(c,1),e&&d&&(d.useCount[v]--,d.useCount[v]===0&&(d.supplied.splice(v,1),d.wrapped.splice(v,1),d.useCount.splice(v,1)));break}p.events[u]&&p.events[u].length===0&&(p.events[u]=null,p.typeCount--)}p.typeCount||(s.splice(h),i.splice(h),o.splice(h))}function f(){this.returnValue=!1}function l(){this.cancelBubble=!0}function c(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var e="attachEvent"in window&&!("addEventListener"in window),t=e?"attachEvent":"addEventListener",n=e?"detachEvent":"removeEventListener",r=e?"on":"",i=[],s=[],o=[];return{add:u,remove:a,useAttachEvent:e,_elements:i,_targets:s,_attachedListeners:o}}();wt.prototype={getPageXY:function(e,t){return J(e,t,this)},getClientXY:function(e,t){return K(e,t,this)},setEventXY:function(e,t){return X(e,t,this)},pointerOver:function(e,t,n){function c(e,t){e&&ht(e,n)&&!pt(e,n,n)&&dt(e,n,n)&&Rt(n,t)&&(r.push(e),i.push(n))}if(this.prepared||!this.mouse)return;var r=[],i=[],u=this.element;this.addPointer(e),this.target&&(pt(this.target,this.element,n)||!dt(this.target,this.element,n)||!yt(this.target,this.element,this.prepared))&&(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var a=l.get(n),f=a&&!pt(a,n,n)&&dt(a,n,n)&&Ct(a.getAction(e,this,n),a);f=a&&yt(a,n,f)?f:null,f?(this.target=a,this.element=n,this.matches=[],this.matchElements=[]):(l.forEachSelector(c),this.validateSelector(e,r,i)?(this.matches=r,this.matchElements=i,this.pointerHover(e,t,this.matches,this.matchElements),_.add(n,s?o.move:"mousemove",kt.pointerHover)):this.target&&(lt(u,n)?(this.pointerHover(e,t,this.matches,this.matchElements),_.add(this.element,s?o.move:"mousemove",kt.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))},pointerHover:function(e,t,n,r,i,s){var o=this.target;if(!this.prepared&&this.mouse){var u;this.setEventXY(this.curCoords,e),i?u=this.validateSelector(e,i,s):o&&(u=Ct(o.getAction(this.pointers[0],this,this.element),this.target)),o&&o.options.styleCursor&&(u?o._doc.documentElement.style.cursor=E[u]:o._doc.documentElement.style.cursor="")}else this.prepared&&this.checkAndPreventDefault(t,o,this.element)},pointerOut:function(e,t,n){if(this.prepared)return;l.get(n)||_.remove(n,s?o.move:"mousemove",kt.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor="")},selectorDown:function(e,t,n,r){function f(e,t,r){var s=A?r.querySelectorAll(t):undefined;ht(e,o)&&!pt(e,o,n)&&dt(e,o,n)&&Rt(o,t,s)&&(i.matches.push(e),i.matchElements.push(o))}var i=this,s=_.useAttachEvent?z({},t):t,o=n,u=this.addPointer(e),a;this.collectEventTargets(e,t,n,"down"),this.holdTimers[u]=window.setTimeout(function(){i.pointerHold(_.useAttachEvent?s:e,s,n,r)},600),this.pointerIsDown=!0;if(this.inertiaStatus.active&&this.target.selector)while(o&&o!==o.ownerDocument){if(o===this.element&&Ct(this.target.getAction(e,this,this.element),this.target)===this.prepared){M(this.inertiaStatus.i),this.inertiaStatus.active=!1;return}o=o.parentNode}if(this.interacting())return;this.setEventXY(this.curCoords,e);if(this.matches.length&&this.mouse)a=this.validateSelector(e,this.matches,this.matchElements);else while(o&&o!==o.ownerDocument&&!a)this.matches=[],this.matchElements=[],l.forEachSelector(f),a=this.validateSelector(e,this.matches,this.matchElements),o=o.parentNode;if(a)return this.prepared=a,this.pointerDown(e,t,n,r,a);this.downTimes[u]=(new Date).getTime(),this.downTargets[u]=n,this.downEvent=t,z(this.downPointer,e),W(this.prevCoords,this.curCoords),this.pointerWasMoved=!1},pointerDown:function(e,t,n,r,i){if(!i&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared){this.checkAndPreventDefault(t,this.target,this.element);return}this.pointerIsDown=!0;var s=this.addPointer(e),o;if(this.pointerIds.length<2&&!this.target||!this.prepared){var u=l.get(r);u&&!pt(u,r,n)&&dt(u,r,n)&&(o=Ct(i||u.getAction(e,this),u,n))&&yt(u,r,o)&&(this.target=u,this.element=r)}var a=this.target,f=a&&a.options;if(a&&!this.interacting()){o=o||Ct(i||a.getAction(e,this),a,this.element),this.setEventXY(this.startCoords);if(!o)return;f.styleCursor&&(a._doc.documentElement.style.cursor=E[o]),this.resizeAxes=o==="resizexy"?"xy":o==="resizex"?"x":o==="resizey"?"y":"",o==="gesture"&&this.pointerIds.length<2&&(o=null),this.prepared=o,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[s]=(new Date).getTime(),this.downTargets[s]=n,this.downEvent=t,z(this.downPointer,e),this.setEventXY(this.prevCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(t,a,this.element)}else this.inertiaStatus.active&&r===this.element&&Ct(a.getAction(e,this,this.element),a)===this.prepared&&(M(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(t,a,this.element))},pointerMove:function(e,t,n,r,i){this.recordPointer(e),this.setEventXY(this.curCoords,e instanceof xt?this.inertiaStatus.startEvent:undefined);var s=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,o,a,f=this.mouse?0:It(this.pointerIds,G(e));this.pointerIsDown&&!this.pointerWasMoved&&(o=this.curCoords.client.x-this.startCoords.client.x,a=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=u(o,a)>d.pointerMoveTolerance),!s&&(!this.pointerIsDown||this.pointerWasMoved)&&(this.pointerIsDown&&window.clearTimeout(this.holdTimers[f]),this.collectEventTargets(e,t,n,"move"));if(!this.pointerIsDown)return;if(s&&this.pointerWasMoved&&!i){this.checkAndPreventDefault(t,this.target,this.element);return}V(this.pointerDelta,this.prevCoords,this.curCoords);if(!this.prepared)return;if(this.pointerWasMoved&&(!this.inertiaStatus.active||e instanceof xt&&/inertiastart/.test(e.type))){if(!this.interacting()){V(this.pointerDelta,this.prevCoords,this.curCoords);if(this.prepared==="drag"){var c=Math.abs(o),h=Math.abs(a),p=this.target.options.dragAxis,m=c>h?"x":c<h?"y":"xy";if(m!=="xy"&&p!=="xy"&&p!==m){this.prepared=null;var g=n;while(g&&g!==g.ownerDocument){var y=l.get(g);if(y&&y!==this.target&&y.getAction(this.downPointer,this,g)==="drag"&&vt(m,y)){this.prepared="drag",this.target=y,this.element=g;break}g=g.parentNode}if(!this.prepared){var b=function(e,t,r){var i=A?r.querySelectorAll(t):undefined;if(e===this.target)return;if(ht(e,n)&&!pt(e,g,n)&&dt(e,g,n)&&Rt(g,t,i)&&e.getAction(this.downPointer,this,g)==="drag"&&vt(m,e)&&yt(e,g,"drag"))return e};g=n;while(g&&g!==g.ownerDocument){var w=l.forEachSelector(b);if(w){this.prepared="drag",this.target=w,this.element=g;break}g=g.parentNode}}}}}var E=!!this.prepared&&!this.interacting();if(E&&!yt(this.target,this.element,this.prepared)){this.stop();return}if(this.prepared&&this.target){var S=this.target,x=!0,T=mt(S,this.prepared)&&(!S.options.snap.endOnly||i),N=gt(S,this.prepared)&&(!S.options.restrict.endOnly||i);if(E){var C=S.getRect(this.element),k=S.options.snap,L=S.options.restrict,O,M;C?(this.startOffset.left=this.startCoords.page.x-C.left,this.startOffset.top=this.startCoords.page.y-C.top,this.startOffset.right=C.right-this.startCoords.page.x,this.startOffset.bottom=C.bottom-this.startCoords.page.y,"width"in C?O=C.width:O=C.right-C.left,"height"in C?M=C.height:M=C.bottom-C.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,C&&k.elementOrigin?(this.snapOffset.x=this.startOffset.left-O*k.elementOrigin.x,this.snapOffset.y=this.startOffset.top-M*k.elementOrigin.y):this.snapOffset.x=this.snapOffset.y=0,C&&L.elementRect?(this.restrictOffset.left=this.startOffset.left-O*L.elementRect.left,this.restrictOffset.top=this.startOffset.top-M*L.elementRect.top,this.restrictOffset.right=this.startOffset.right-O*(1-L.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-M*(1-L.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0}var _=E?this.startCoords.page:this.curCoords.page;T?this.setSnapping(_):this.snapStatus.locked=!1,N?this.setRestriction(_):this.restrictStatus.restricted=!1,T&&this.snapStatus.locked&&!this.snapStatus.changed?x=N&&this.restrictStatus.restricted&&this.restrictStatus.changed:N&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(x=!1);if(x){var D=/resize/.test(this.prepared)?"resize":this.prepared;if(E){var P=this[D+"Start"](this.downEvent);this.prevEvent=P,this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var H=this.getDropEvents(t,P);H.activate&&this.fireActiveDrops(H.activate),_=this.curCoords.page,T&&this.setSnapping(_),N&&this.setRestriction(_)}this.prevEvent=this[D+"Move"](t)}this.checkAndPreventDefault(t,this.target,this.element)}}W(this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&v.edgeMove(t)},dragStart:function(e){var t=new xt(this,e,"drag","start",this.element);return this.dragging=!0,this.target.fire(t),t},dragMove:function(e){var t=this.target,n=new xt(this,e,"drag","move",this.element),r=this.element,i=this.getDrop(n,r);this.dropTarget=i.dropzone,this.dropElement=i.element;var s=this.getDropEvents(e,n);return t.fire(n),s.leave&&this.prevDropTarget.fire(s.leave),s.enter&&this.dropTarget.fire(s.enter),s.move&&this.dropTarget.fire(s.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,n},resizeStart:function(e){var t=new xt(this,e,"resize","start",this.element);return this.target.fire(t),this.resizing=!0,t},resizeMove:function(e){var t=new xt(this,e,"resize","move",this.element);return this.target.fire(t),t},gestureStart:function(e){var t=new xt(this,e,"gesture","start",this.element);return t.ds=0,this.gesture.startDistance=this.gesture.prevDistance=t.distance,this.gesture.startAngle=this.gesture.prevAngle=t.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(t),t},gestureMove:function(e){if(!this.pointerIds.length)return this.prevEvent;var t;return t=new xt(this,e,"gesture","move",this.element),t.ds=t.scale-this.gesture.scale,this.target.fire(t),this.gesture.prevAngle=t.angle,this.gesture.prevDistance=t.distance,t.scale!==Infinity&&t.scale!==null&&t.scale!==undefined&&!isNaN(t.scale)&&(this.gesture.scale=t.scale),t},pointerHold:function(e,t,n){this.collectEventTargets(e,t,n,"hold")},pointerUp:function(e,t,n,r){var i=this.mouse?0:It(this.pointerIds,G(e));window.clearTimeout(this.holdTimers[i]),this.collectEventTargets(e,t,n,"up"),this.collectEventTargets(e,t,n,"tap"),this.pointerEnd(e,t,n,r),this.removePointer(e)},pointerCancel:function(e,t,n,r){var i=this.mouse?0:It(this.pointerIds,G(e));window.clearTimeout(this.holdTimers[i]),this.collectEventTargets(e,t,n,"cancel"),this.pointerEnd(e,t,n,r)},ie8Dblclick:function(e,t,n){this.prevTap&&t.clientX===this.prevTap.clientX&&t.clientY===this.prevTap.clientY&&n===this.prevTap.target&&(this.downTargets[0]=n,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(e,t,n,"tap"))},pointerEnd:function(e,t,n,r){var i,s=this.target,o=s&&s.options,u=o&&o.inertia,a=this.inertiaStatus;if(this.interacting()){if(a.active)return;var f,l=(new Date).getTime(),c=!1,h=!1,p=!1,d=mt(s,this.prepared)&&o.snap.endOnly,v=gt(s,this.prepared)&&o.restrict.endOnly,m=0,g=0,y;this.dragging&&(o.dragAxis==="x"?f=Math.abs(this.pointerDelta.client.vx):o.dragAxis==="y"?f=Math.abs(this.pointerDelta.client.vy):f=this.pointerDelta.client.speed),c=o.inertiaEnabled&&this.prepared!=="gesture"&&qt(u.actions,this.prepared)&&t!==a.startEvent,h=c&&l-this.curCoords.timeStamp<50&&f>u.minSpeed&&f>u.endSpeed;if(c&&!h&&(d||v)){var b={};b.snap=b.restrict=b,d&&(this.setSnapping(this.curCoords.page,b),b.locked&&(m+=b.dx,g+=b.dy)),v&&(this.setRestriction(this.curCoords.page,b),b.restricted&&(m+=b.dx,g+=b.dy));if(m||g)p=!0}if(h||p){W(a.upCoords,this.curCoords),this.pointers[0]=a.startEvent=y=new xt(this,t,this.prepared,"inertiastart",this.element),a.t0=l,s.fire(a.startEvent);if(h){a.vx0=this.pointerDelta.client.vx,a.vy0=this.pointerDelta.client.vy,a.v0=f,this.calcInertia(a);var w=z({},this.curCoords.page),E=ot(s,this.element),S;w.x=w.x+a.xe-E.x,w.y=w.y+a.ye-E.y,S={useStatusXY:!0,x:w.x,y:w.y,dx:0,dy:0,snap:null},S.snap=S,m=g=0;if(d){var x=this.setSnapping(this.curCoords.page,S);x.locked&&(m+=x.dx,g+=x.dy)}if(v){var T=this.setRestriction(this.curCoords.page,S);T.restricted&&(m+=T.dx,g+=T.dy)}a.modifiedXe+=m,a.modifiedYe+=g,a.i=O(this.boundInertiaFrame)}else a.smoothEnd=!0,a.xe=m,a.ye=g,a.sx=a.sy=0,a.i=O(this.boundSmoothEndFrame);a.active=!0;return}(d||v)&&this.pointerMove(e,t,n,r,!0)}if(this.dragging){i=new xt(this,t,"drag","end",this.element);var N=this.element,C=this.getDrop(i,N);this.dropTarget=C.dropzone,this.dropElement=C.element;var k=this.getDropEvents(t,i);k.leave&&this.prevDropTarget.fire(k.leave),k.enter&&this.dropTarget.fire(k.enter),k.drop&&this.dropTarget.fire(k.drop),k.deactivate&&this.fireActiveDrops(k.deactivate),s.fire(i)}else this.resizing?(i=new xt(this,t,"resize","end",this.element),s.fire(i)):this.gesturing&&(i=new xt(this,t,"gesture","end",this.element),s.fire(i));this.stop(t)},collectDrops:function(e){var t=[],n=[],r;e=e||this.element;for(r=0;r<l.length;r++){if(!l[r].options.dropzone)continue;var i=l[r];if(P(i.options.accept)&&i.options.accept!==e||R(i.options.accept)&&!Rt(e,i.options.accept))continue;var s=i.selector?i._context.querySelectorAll(i.selector):[i._element];for(var o=0,u=s.length;o<u;o++){var a=s[o];if(a===e)continue;t.push(i),n.push(a)}}return{dropzones:t,elements:n}},fireActiveDrops:function(e){var t,n,r,i;for(t=0;t<this.activeDrops.dropzones.length;t++)n=this.activeDrops.dropzones[t],r=this.activeDrops.elements[t],r!==i&&(e.target=r,n.fire(e)),i=r},setActiveDrops:function(e){var t=this.collectDrops(e,!0);this.activeDrops.dropzones=t.dropzones,this.activeDrops.elements=t.elements,this.activeDrops.rects=[];for(var n=0;n<this.activeDrops.dropzones.length;n++)this.activeDrops.rects[n]=this.activeDrops.dropzones[n].getRect(this.activeDrops.elements[n])},getDrop:function(e,t){var n=[];h&&this.setActiveDrops(t);for(var r=0;r<this.activeDrops.dropzones.length;r++){var i=this.activeDrops.dropzones[r],s=this.activeDrops.elements[r],o=this.activeDrops.rects[r];n.push(i.dropCheck(this.pointers[0],this.target,t,s,o)?s:null)}var u=bt(n),a=this.activeDrops.dropzones[u]||null,f=this.activeDrops.elements[u]||null;return{dropzone:a,element:f}},getDropEvents:function(e,t){var n=null,r=null,i=null,s=null,o=null,u=null;return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(n=new xt(this,e,"drag","leave",this.prevDropElement,t.target),n.draggable=t.interactable,t.dragLeave=this.prevDropElement,t.prevDropzone=this.prevDropTarget),this.dropTarget&&(r=new xt(this,e,"drag","enter",this.dropElement,t.target),r.draggable=t.interactable,t.dragEnter=this.dropElement,t.dropzone=this.dropTarget)),t.type==="dragend"&&this.dropTarget&&(u=new xt(this,e,"drop",null,this.dropElement,t.target),u.draggable=t.interactable,t.dropzone=this.dropTarget),t.type==="dragstart"&&(i=new xt(this,e,"drop","activate",this.element,t.target),i.draggable=t.interactable),t.type==="dragend"&&(s=new xt(this,e,"drop","deactivate",this.element,t.target),s.draggable=t.interactable),t.type==="dragmove"&&this.dropTarget&&(o={target:this.dropElement,relatedTarget:t.target,draggable:t.interactable,dragmove:t,type:"dropmove",timeStamp:t.timeStamp},t.dropzone=this.dropTarget),{enter:r,leave:n,activate:i,deactivate:s,move:o,drop:u}},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target&&!this.target.selector&&(this.target=this.element=null),this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(e){if(this.interacting()){v.stop(),this.matches=[],this.matchElements=[];var t=this.target;t.options.styleCursor&&(t._doc.documentElement.style.cursor=""),e&&F(e.preventDefault)&&this.checkAndPreventDefault(e,t,this.element),this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null),this.clearTargets()}this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0,this.pointerIds.splice(0),this.pointers.splice(0),this.downTargets.splice(0),this.downTimes.splice(0),this.holdTimers.splice(0),c.length>1&&c.splice(It(c,this),1)},inertiaFrame:function(){var e=this.inertiaStatus,t=this.target.options.inertia,n=t.resistance,r=(new Date).getTime()/1e3-e.t0;if(r<e.te){var i=1-(Math.exp(-n*r)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye)e.sx=e.xe*i,e.sy=e.ye*i;else{var s=at(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,i);e.sx=s.x,e.sy=s.y}this.pointerMove(e.startEvent,e.startEvent),e.i=O(this.boundInertiaFrame)}else e.sx=e.modifiedXe,e.sy=e.modifiedYe,this.pointerMove(e.startEvent,e.startEvent),e.active=!1,this.pointerEnd(e.startEvent,e.startEvent)},smoothEndFrame:function(){var e=this.inertiaStatus,t=(new Date).getTime()-e.t0,n=this.target.options.inertia.smoothEndDuration;t<n?(e.sx=ft(t,0,e.xe,n),e.sy=ft(t,0,e.ye,n),this.pointerMove(e.startEvent,e.startEvent),e.i=O(this.boundSmoothEndFrame)):(e.sx=e.xe,e.sy=e.ye,this.pointerMove(e.startEvent,e.startEvent),e.active=!1,e.smoothEnd=!1,this.pointerEnd(e.startEvent,e.startEvent))},addPointer:function(e){var t=G(e),n=this.mouse?0:It(this.pointerIds,t);return n===-1&&(n=this.pointerIds.length,this.pointerIds.push(t)),this.pointers[n]=e,n},removePointer:function(e){var t=G(e),n=this.mouse?0:It(this.pointerIds,t);if(n===-1)return;this.interacting()||this.pointers.splice(n,1),this.pointerIds.splice(n,1),this.downTargets.splice(n,1),this.downTimes.splice(n,1),this.holdTimers.splice(n,1)},recordPointer:function(e){if(this.inertiaStatus.active)return;var t=this.mouse?0:It(this.pointerIds,G(e));if(t===-1)return;this.pointers[t]=e},collectEventTargets:function(e,t,n,r){function a(e,t,i){var a=A?i.querySelectorAll(t):undefined;e._iEvents[r]&&P(u)&&ht(e,u)&&!pt(e,u,n)&&dt(e,u,n)&&Rt(u,t,a)&&(s.push(e),o.push(u))}var i=this.mouse?0:It(this.pointerIds,G(e));if(r==="tap"&&(this.pointerWasMoved||!this.downTargets[i]||this.downTargets[i]!==n))return;var s=[],o=[],u=n;while(u)Pt.isSet(u)&&Pt(u)._iEvents[r]&&(s.push(Pt(u)),o.push(u)),l.forEachSelector(a),u=u.parentNode;(s.length||r==="tap")&&this.firePointers(e,t,n,s,o,r)},firePointers:function(e,t,n,r,i,s){var o=this.mouse?0:It(G(e)),u={},a,f,l;s==="doubletap"?u=e:(z(u,t),t!==e&&z(u,e),u.preventDefault=Tt,u.stopPropagation=xt.prototype.stopPropagation,u.stopImmediatePropagation=xt.prototype.stopImmediatePropagation,u.interaction=this,u.timeStamp=(new Date).getTime(),u.originalEvent=t,u.type=s,u.pointerId=G(e),u.pointerType=this.mouse?"mouse":g?R(e.pointerType)?e.pointerType:[,,"touch","pen","mouse"][e.pointerType]:"touch"),s==="tap"&&(u.dt=u.timeStamp-this.downTimes[o],f=u.timeStamp-this.tapTime,l=this.prevTap&&this.prevTap.type!=="doubletap"&&this.prevTap.target===u.target&&f<500,this.tapTime=u.timeStamp);for(a=0;a<r.length;a++){u.currentTarget=i[a],u.interactable=r[a],r[a].fire(u);if(u.immediatePropagationStopped||u.propagationStopped&&i[a+1]!==u.currentTarget)break}if(l){var c={};z(c,u),c.dt=f,c.type="doubletap",this.collectEventTargets(c,t,n,"doubletap"),this.prevTap=c}else s==="tap"&&(this.prevTap=u)},validateSelector:function(e,t,n){for(var r=0,i=t.length;r<i;r++){var s=t[r],o=n[r],u=Ct(s.getAction(e,this,o),s);if(u&&yt(s,o,u))return this.target=s,this.element=o,u}},setSnapping:function(e,t){var n=this.target.options.snap,r=n.anchors,i,s,o,a,f,l,c,h,p,d;t=t||this.snapStatus;if(t.useStatusXY)i={x:t.x,y:t.y};else{var v=ot(this.target,this.element);i=z({},e),i.x-=v.x,i.y-=v.y}i.x-=this.inertiaStatus.resumeDx,i.y-=this.inertiaStatus.resumeDy,t.realX=i.x,t.realY=i.y,n.range<0&&(n.range=Infinity);if(n.mode==="path"){r=[];for(p=0,d=n.paths.length;p<d;p++){var m=n.paths[p];F(m)&&(m=m(i.x,i.y)),r.push({x:I(m.x)?m.x:i.x,y:I(m.y)?m.y:i.y,range:I(m.range)?m.range:n.range})}}if(n.mode!=="anchor"&&n.mode!=="path"||!r.length){if(n.mode==="grid"){var y=Math.round((i.x-n.gridOffset.x-this.snapOffset.x)/n.grid.x),b=Math.round((i.y-n.gridOffset.y-this.snapOffset.y)/n.grid.y),w=y*n.grid.x+n.gridOffset.x+this.snapOffset.x,E=b*n.grid.y+n.gridOffset.y+this.snapOffset.y;l=w-i.x,c=E-i.y,h=u(l,c),a=h<n.range,f=w!==t.snappedX||E!==t.snappedY,t.snappedX=w,t.snappedY=E,t.dx=l,t.dy=c,t.range=n.range}}else{s={anchor:null,distance:0,range:0,dx:0,dy:0};for(p=0,d=r.length;p<d;p++){var g=r[p];o=I(g.range)?g.range:n.range,l=g.x-i.x+this.snapOffset.x,c=g.y-i.y+this.snapOffset.y,h=u(l,c),a=h<o,o===Infinity&&s.inRange&&s.range!==Infinity&&(a=!1);if(!s.anchor||(a?s.inRange&&o!==Infinity?h/o<s.distance/s.range:h<s.distance:!s.inRange&&h<s.distance))o===Infinity&&(a=!0),s.anchor=g,s.distance=h,s.range=o,s.inRange=a,s.dx=l,s.dy=c,t.range=o}a=s.inRange,f=s.anchor.x!==t.x||s.anchor.y!==t.y,t.snappedX=s.anchor.x,t.snappedY=s.anchor.y,t.dx=s.dx,t.dy=s.dy}return t.changed=f||a&&!t.locked,t.locked=a,t},setRestriction:function(e,t){var n=this.target,r=/resize/.test(this.prepared)?"resize":this.prepared,i=n&&n.options.restrict,s=i&&i[r],o;if(!s)return t;t=t||this.restrictStatus,o=t.useStatusXY?o={x:t.x,y:t.y}:o=z({},e),t.snap&&t.snap.locked&&(o.x+=t.snap.dx||0,o.y+=t.snap.dy||0),o.x-=this.inertiaStatus.resumeDx,o.y-=this.inertiaStatus.resumeDy,t.dx=0,t.dy=0,t.restricted=!1;var u,a,f;if(R(s)){s==="parent"?s=this.element.parentNode:s==="self"?s=n.getRect(this.element):s=ct(this.element,s);if(!s)return t}return F(s)&&(s=s(o.x,o.y,this.element)),P(s)&&(s=et(s)),u=s,"x"in s&&"y"in s?(a=Math.max(Math.min(u.x+u.width-this.restrictOffset.right,o.x),u.x+this.restrictOffset.left),f=Math.max(Math.min(u.y+u.height-this.restrictOffset.bottom,o.y),u.y+this.restrictOffset.top)):(a=Math.max(Math.min(u.right-this.restrictOffset.right,o.x),u.left+this.restrictOffset.left),f=Math.max(Math.min(u.bottom-this.restrictOffset.bottom,o.y),u.top+this.restrictOffset.top)),t.dx=a-o.x,t.dy=f-o.y,t.changed=t.restrictedX!==a||t.restrictedY!==f,t.restricted=!!t.dx||!!t.dy,t.restrictedX=a,t.restrictedY=f,t},checkAndPreventDefault:function(e,t,n){if(!(t=t||this.target))return;var r=t.options,i=r.preventDefault;if(i==="auto"&&n&&!/^input$|^textarea$/i.test(n.nodeName)){if(/down|start/i.test(e.type)&&this.prepared==="drag"&&r.dragAxis!=="xy")return;e.preventDefault();return}if(i===!0){e.preventDefault();return}},calcInertia:function(e){var t=this.target.options.inertia,n=t.resistance,r=-Math.log(t.endSpeed/e.v0)/n;e.x0=this.prevEvent.pageX,e.y0=this.prevEvent.pageY,e.t0=e.startEvent.timeStamp/1e3,e.sx=e.sy=0,e.modifiedXe=e.xe=(e.vx0-r)/n,e.modifiedYe=e.ye=(e.vy0-r)/n,e.te=r,e.lambda_v0=n/e.v0,e.one_ve_v0=1-t.endSpeed/e.v0}},xt.prototype={preventDefault:D,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};var kt={},Lt=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer"];for(var At=0,Ot=Lt.length;At<Ot;At++){var Mt=Lt[At];kt[Mt]=St(Mt)}l.indexOfElement=function(n,r){r=r||e;for(var i=0;i<this.length;i++){var s=this[i];if(s.selector===n&&s._context===r||!s.selector&&s._element===n)return i}return-1},l.get=function(t,n){return this[this.indexOfElement(t,n&&n.context)]},l.forEachSelector=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(!n.selector)continue;var r=e(n,n.selector,n._context,t,this);if(r!==undefined)return r}},Ht.prototype=d,Bt.prototype={setOnEvents:function(e,t){if(e==="drop"){var n=t.ondrop||t.onDrop||t.drop,r=t.ondropactivate||t.onDropActivate||t.dropactivate||t.onactivate||t.onActivate||t.activate,i=t.ondropdeactivate||t.onDropDeactivate||t.dropdeactivate||t.ondeactivate||t.onDeactivate||t.deactivate,s=t.ondragenter||t.onDropEnter||t.dragenter||t.onenter||t.onEnter||t.enter,o=t.ondragleave||t.onDropLeave||t.dragleave||t.onleave||t.onLeave||t.leave,u=t.ondropmove||t.onDropMove||t.dropmove||t.onmove||t.onMove||t.move;F(n)&&(this.ondrop=n),F(r)&&(this.ondropactivate=r),F(i)&&(this.ondropdeactivate=i),F(s)&&(this.ondragenter=s),F(o)&&(this.ondragleave=o),F(u)&&(this.ondropmove=u)}else{var a=t.onstart||t.onStart||t.start,f=t.onmove||t.onMove||t.move,l=t.onend||t.onEnd||t.end,c=t.oninertiastart||t.onInertiaStart||t.inertiastart;e="on"+e,F(a)&&(this[e+"start"]=a),F(f)&&(this[e+"move"]=f),F(l)&&(this[e+"end"]=l),F(c)&&(this[e+"inertiastart"]=c)}return this},draggable:function(e){return j(e)?(this.options.draggable=!0,this.setOnEvents("drag",e),I(e.max)&&(this.options.dragMax=e.max),I(e.maxPerElement)&&(this.options.dragMaxPerElement=e.maxPerElement),/^x$|^y$|^xy$/.test(e.axis)?this.options.dragAxis=e.axis:e.axis===null&&delete this.options.dragAxis,this):q(e)?(this.options.draggable=e,this):e===null?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){return j(e)?(this.options.dropzone=!0,this.setOnEvents("drop",e),this.accept(e.accept),/^(pointer|center)$/.test(e.overlap)?this.options.dropOverlap=e.overlap:I(e.overlap)&&(this.options.dropOverlap=Math.max(Math.min(1,e.overlap),0)),this):q(e)?(this.options.dropzone=e,this):e===null?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e,t,n,r,i){if(!(i=i||this.getRect(r)))return!1;var s=this.options.dropOverlap;if(s==="pointer"){var o=J(e),u=ot(t,n),a,f;return o.x+=u.x,o.y+=u.y,a=o.x>i.left&&o.x<i.right,f=o.y>i.top&&o.y<i.bottom,a&&f}var l=t.getRect(n);if(s==="center"){var c=l.left+l.width/2,h=l.top+l.height/2;return c>=i.left&&c<=i.right&&h>=i.top&&h<=i.bottom}if(I(s)){var p=Math.max(0,Math.min(i.right,l.right)-Math.max(i.left,l.left))*Math.max(0,Math.min(i.bottom,l.bottom)-Math.max(i.top,l.top)),d=p/(l.width*l.height);return d>=s}},dropChecker:function(e){return F(e)?(this.dropCheck=e,this):this.dropCheck},accept:function(e){return P(e)?(this.options.accept=e,this):U(e)?(this.options.accept=e,this):e===null?(delete this.options.accept,this):this.options.accept},resizable:function(e){return j(e)?(this.options.resizable=!0,this.setOnEvents("resize",e),I(e.max)&&(this.options.resizeMax=e.max),I(e.maxPerElement)&&(this.options.resizeMaxPerElement=e.maxPerElement),/^x$|^y$|^xy$/.test(e.axis)?this.options.resizeAxis=e.axis:e.axis===null&&(this.options.resizeAxis=d.resizeAxis),this):q(e)?(this.options.resizable=e,this):this.options.resizable},resizeable:D,squareResize:function(e){return q(e)?(this.options.squareResize=e,this):e===null?(delete this.options.squareResize,this):this.options.squareResize},gesturable:function(e){return j(e)?(this.options.gesturable=!0,this.setOnEvents("gesture",e),I(e.max)&&(this.options.gestureMax=e.max),I(e.maxPerElement)&&(this.options.gestureMaxPerElement=e.maxPerElement),this):q(e)?(this.options.gesturable=e,this):e===null?(delete this.options.gesturable,this):this.options.gesturable},gestureable:D,autoScroll:function(e){var t=d.autoScroll;if(j(e)){var n=this.options.autoScroll;return n===t&&(n=this.options.autoScroll={margin:t.margin,distance:t.distance,interval:t.interval,container:t.container}),n.margin=this.validateSetting("autoScroll","margin",e.margin),n.speed=this.validateSetting("autoScroll","speed",e.speed),n.container=P(e.container)||H(e.container)?e.container:t.container,this.options.autoScrollEnabled=!0,this.options.autoScroll=n,this}return q(e)?(this.options.autoScrollEnabled=e,this):e===null?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=d.snap;if(j(e)){var n=this.options.snap;return n===t&&(n={}),n.mode=this.validateSetting("snap","mode",e.mode),n.endOnly=this.validateSetting("snap","endOnly",e.endOnly),n.actions=this.validateSetting("snap","actions",e.actions),n.range=this.validateSetting("snap","range",e.range),n.paths=this.validateSetting("snap","paths",e.paths),n.grid=this.validateSetting("snap","grid",e.grid),n.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),n.anchors=this.validateSetting("snap","anchors",e.anchors),n.elementOrigin=this.validateSetting("snap","elementOrigin",e.elementOrigin),this.options.snapEnabled=!0,this.options.snap=n,this}return q(e)?(this.options.snapEnabled=e,this):e===null?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},inertia:function(e){var t=d.inertia;if(j(e)){var n=this.options.inertia;return n===t&&(n=this.options.inertia={resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,allowResume:t.allowResume,zeroResumeDelta:t.zeroResumeDelta,smoothEndDuration:t.smoothEndDuration}),n.resistance=this.validateSetting("inertia","resistance",e.resistance),n.minSpeed=this.validateSetting("inertia","minSpeed",e.minSpeed),n.endSpeed=this.validateSetting("inertia","endSpeed",e.endSpeed),n.actions=this.validateSetting("inertia","actions",e.actions),n.allowResume=this.validateSetting("inertia","allowResume",e.allowResume),n.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",e.zeroResumeDelta),n.smoothEndDuration=this.validateSetting("inertia","smoothEndDuration",e.smoothEndDuration),this.options.inertiaEnabled=!0,this.options.inertia=n,this}return q(e)?(this.options.inertiaEnabled=e,this):e===null?(delete this.options.inertiaEnabled,delete this.options.inertia,this):this.options.inertiaEnabled?this.options.inertia:!1},getAction:function(e,t,n){var r=this.defaultActionChecker(e,t,n);return this.options.actionChecker&&(r=this.options.actionChecker(e,r,this,n,t)),r},defaultActionChecker:Nt,actionChecker:function(e){return F(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(t){return t=t||this._element,this.selector&&!P(t)&&(t=this._context.querySelector(this.selector)),et(t)},rectChecker:function(e){return F(e)?(this.getRect=e,this):e===null?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return q(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(e){return q(e)||e==="auto"?(this.options.preventDefault=e,this):e===null?(delete this.options.preventDefault,this):this.options.preventDefault},origin:function(e){return U(e)?(this.options.origin=e,this):j(e)?(this.options.origin=e,this):e===null?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return e==="page"||e==="client"?(this.options.deltaSource=e,this):e===null?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(e){if(e===undefined)return this.options.restrict;if(q(e))d.restrictEnabled=e;else if(j(e)){var t={};if(j(e.drag)||U(e.drag))t.drag=e.drag;if(j(e.resize)||U(e.resize))t.resize=e.resize;if(j(e.gesture)||U(e.gesture))t.gesture=e.gesture;q(e.endOnly)&&(t.endOnly=e.endOnly),j(e.elementRect)&&(t.elementRect=e.elementRect),this.options.restrictEnabled=!0,this.options.restrict=t}else e===null&&(delete this.options.restrict,delete this.options.restrictEnabled);return this},context:function(){return this._context},_context:e,ignoreFrom:function(e){return U(e)?(this.options.ignoreFrom=e,this):P(e)?(this.options.ignoreFrom=e,this):e===null?(delete this.options.ignoreFrom,this):this.options.ignoreFrom},allowFrom:function(e){return U(e)?(this.options.allowFrom=e,this):P(e)?(this.options.allowFrom=e,this):e===null?(delete this.options.allowFrom,this):this.options.allowFrom},validateSetting:function(e,t,n){var r=d[e],i=this.options[e];if(r!==undefined&&r[t]!==undefined){if("objectTypes"in r&&r.objectTypes.test(t))return j(n)?n:t in i&&j(i[t])?i[t]:r[t];if("arrayTypes"in r&&r.arrayTypes.test(t))return B(n)?n:t in i&&B(i[t])?i[t]:r[t];if("stringTypes"in r&&r.stringTypes.test(t))return R(n)?n:t in i&&R(i[t])?i[t]:r[t];if("numberTypes"in r&&r.numberTypes.test(t))return I(n)?n:t in i&&I(i[t])?i[t]:r[t];if("boolTypes"in r&&r.boolTypes.test(t))return q(n)?n:t in i&&q(i[t])?i[t]:r[t];if("elementTypes"in r&&r.elementTypes.test(t))return P(n)?n:t in i&&P(i[t])?i[t]:r[t]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||!qt(T,e.type))return this;var t,n,r,i="on"+e.type,s="";if(e.type in this._iEvents){t=this._iEvents[e.type];for(n=0,r=t.length;n<r&&!e.immediatePropagationStopped;n++)s=t[n].name,t[n](e)}F(this[i])&&(s=this[i].name,this[i](e));if(e.type in N&&(t=N[e.type]))for(n=0,r=t.length;n<r&&!e.immediatePropagationStopped;n++)s=t[n].name,t[n](e);return this},on:function(e,t,n){var r;if(B(e)){for(r=0;r<e.length;r++)this.on(e[r],t,n);return this}e==="wheel"&&(e=x),n=n?!0:!1;if(qt(T,e))e in this._iEvents?this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){if(!p[e]){p[e]={selectors:[],contexts:[],listeners:[]};for(r=0;r<f.length;r++)_.add(f[r],e,_t),_.add(f[r],e,Dt,!0)}var i=p[e],s;for(s=i.selectors.length-1;s>=0;s--)if(i.selectors[s]===this.selector&&i.contexts[s]===this._context)break;s===-1&&(s=i.selectors.length,i.selectors.push(this.selector),i.contexts.push(this._context),i.listeners.push([])),i.listeners[s].push([t,n])}else _.add(this._element,e,t,n);return this},off:function(e,t,n){var r;if(B(e)){for(r=0;r<e.length;r++)this.off(e[r],t,n);return this}var i,s=-1;n=n?!0:!1,e==="wheel"&&(e=x);if(qt(T,e))i=this._iEvents[e],i&&(s=It(i,t))!==-1&&this._iEvents[e].splice(s,1);else if(this.selector){var o=p[e],u=!1;if(!o)return this;for(s=o.selectors.length-1;s>=0;s--)if(o.selectors[s]===this.selector&&o.contexts[s]===this._context){var a=o.listeners[s];for(r=a.length-1;r>=0;r--){var f=a[r][0],l=a[r][1];if(f===t&&l===n){a.splice(r,1),a.length||(o.selectors.splice(s,1),o.contexts.splice(s,1),o.listeners.splice(s,1),_.remove(this._context,e,_t),_.remove(this._context,e,Dt,!0),o.selectors.length||(p[e]=null)),u=!0;break}}if(u)break}}else _.remove(this,t,n);return this},set:function(e){if(!e||!j(e))e={};this.options=new Ht(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizable("resizable"in e?e.resizable:this.options.resizable),this.gesturable("gesturable"in e?e.gesturable:this.options.gesturable);var t=["accept","actionChecker","allowFrom","autoScroll","deltaSource","dropChecker","ignoreFrom","inertia","origin","preventDefault","rectChecker","restrict","snap","styleCursor"];for(var n=0,r=t.length;n<r;n++){var i=t[n];i in e&&this[i](e[i])}return this},unset:function(){_.remove(this,"all");if(!R(this.selector))_.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");else for(var e in p){var t=p[e];for(var n=0;n<t.selectors.length;n++){t.selectors[n]===this.selector&&t.contexts[n]===this._context&&(t.selectors.splice(n,1),t.contexts.splice(n,1),t.listeners.splice(n,1),t.selectors.length||(p[e]=null)),_.remove(this._context,e,_t),_.remove(this._context,e,Dt,!0);break}}return this.dropzone(!1),l.splice(It(l,this),1),Pt}},Bt.prototype.gestureable=Bt.prototype.gesturable,Bt.prototype.resizeable=Bt.prototype.resizable,Pt.isSet=function(e,t){return l.indexOfElement(e,t&&t.context)!==-1},Pt.on=function(t,n,r){if(B(t)){for(var i=0;i<t.length;i++)Pt.on(t[i],n,r);return Pt}return qt(T,t)?N[t]?N[t].push(n):N[t]=[n]:_.add(e,t,n,r),Pt},Pt.off=function(t,n,r){if(B(t)){for(var i=0;i<t.length;i++)Pt.off(t[i],n,r);return Pt}if(!qt(T,t))_.remove(e,t,n,r);else{var s;t in N&&(s=It(N[t],n))!==-1&&N[t].splice(s,1)}return Pt},Pt.simulate=function(e,n,r){var i={},s;return e==="resize"&&(e="resizexy"),/^(drag|resizexy|resizex|resizey)$/.test(e)?(r?z(i,r):(s=n instanceof t?n.getBoundingClientRect():s=n.getClientRects()[0],e==="drag"?(i.pageX=s.left+s.width/2,i.pageY=s.top+s.height/2):(i.pageX=s.right,i.pageY=s.bottom)),i.target=i.currentTarget=n,i.preventDefault=i.stopPropagation=D,kt.pointerDown(i,e),Pt):Pt},Pt.enableDragging=function(e){return e!==null&&e!==undefined?(S.drag=e,Pt):S.drag},Pt.enableResizing=function(e){return e!==null&&e!==undefined?(S.resize=e,Pt):S.resize},Pt.enableGesturing=function(e){return e!==null&&e!==undefined?(S.gesture=e,Pt):S.gesture},Pt.eventTypes=T,Pt.debug=function(){var e=c[0]||new wt;return{interactions:c,target:e.target,dragging:e.dragging,resizing:e.resizing,gesturing:e.gesturing,prepared:e.prepared,matches:e.matches,matchElements:e.matchElements,prevCoords:e.prevCoords,startCoords:e.startCoords,pointerIds:e.pointerIds,pointers:e.pointers,addPointer:kt.addPointer,removePointer:kt.removePointer,recordPointer:kt.recordPointer,snap:e.snapStatus,restrict:e.restrictStatus,inertia:e.inertiaStatus,downTime:e.downTimes[0],downEvent:e.downEvent,downPointer:e.downPointer,prevEvent:e.prevEvent,Interactable:Bt,IOptions:Ht,interactables:l,pointerIsDown:e.pointerIsDown,defaultOptions:d,defaultActionChecker:Nt,actionCursors:E,dragMove:kt.dragMove,resizeMove:kt.resizeMove,gestureMove:kt.gestureMove,pointerUp:kt.pointerUp,pointerDown:kt.pointerDown,pointerMove:kt.pointerMove,pointerHover:kt.pointerHover,events:_,globalEvents:N,delegatedEvents:p}},Pt.getTouchAverage=nt,Pt.getTouchBBox=rt,Pt.getTouchDistance=it,Pt.getTouchAngle=st,Pt.getElementRect=et,Pt.matchesSelector=Rt,Pt.closest=ct,Pt.margin=function(e){return I(e)?(y=e,Pt):y},Pt.styleCursor=function(e){return q(e)?(d.styleCursor=e,Pt):d.styleCursor},Pt.autoScroll=function(e){var t=d.autoScroll;return j(e)?(d.autoScrollEnabled=!0,I(e.margin)&&(t.margin=e.margin),I(e.speed)&&(t.speed=e.speed),t.container=P(e.container)||H(e.container)?e.container:t.container,Pt):q(e)?(d.autoScrollEnabled=e,Pt):d.autoScrollEnabled?t:!1},Pt.snap=function(e){var t=d.snap;return j(e)?(d.snapEnabled=!0,R(e.mode)&&(t.mode=e.mode),q(e.endOnly)&&(t.endOnly=e.endOnly),I(e.range)&&(t.range=e.range),B(e.actions)&&(t.actions=e.actions),B(e.anchors)&&(t.anchors=e.anchors),j(e.grid)&&(t.grid=e.grid),j(e.gridOffset)&&(t.gridOffset=e.gridOffset),j(e.elementOrigin)&&(t.elementOrigin=e.elementOrigin),Pt):q(e)?(d.snapEnabled=e,Pt):d.snapEnabled},Pt.inertia=function(e){var t=d.inertia;return j(e)?(d.inertiaEnabled=!0,I(e.resistance)&&(t.resistance=e.resistance),I(e.minSpeed)&&(t.minSpeed=e.minSpeed),I(e.endSpeed)&&(t.endSpeed=e.endSpeed),I(e.smoothEndDuration)&&(t.smoothEndDuration=e.smoothEndDuration),q(e.allowResume)&&(t.allowResume=e.allowResume),q(e.zeroResumeDelta)&&(t.zeroResumeDelta=e.zeroResumeDelta),B(e.actions)&&(t.actions=e.actions),Pt):q(e)?(d.inertiaEnabled=e,Pt):{enabled:d.inertiaEnabled,resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,allowResume:t.allowResume,zeroResumeDelta:t.zeroResumeDelta}},Pt.supportsTouch=function(){return m},Pt.supportsPointerEvent=function(){return g},Pt.currentAction=function(){for(var e=0,t=c.length;e<t;e++){var n=c[e].currentAction();if(n)return n}return null},Pt.stop=function(e){for(var t=c.length-1;t>0;t--)c[t].stop(e);return Pt},Pt.dynamicDrop=function(e){return q(e)?(h=e,Pt):h},Pt.deltaSource=function(e){return e==="page"||e==="client"?(d.deltaSource=e,this):d.deltaSource},Pt.restrict=function(e){var t=d.restrict;if(e===undefined)return d.restrict;if(q(e))d.restrictEnabled=e;else if(j(e)){if(j(e.drag)||/^parent$|^self$/.test(e.drag))t.drag=e.drag;if(j(e.resize)||/^parent$|^self$/.test(e.resize))t.resize=e.resize;if(j(e.gesture)||/^parent$|^self$/.test(e.gesture))t.gesture=e.gesture;q(e.endOnly)&&(t.endOnly=e.endOnly),j(e.elementRect)&&(t.elementRect=e.elementRect),d.restrictEnabled=!0}else e===null&&(t.drag=t.resize=t.gesture=null,t.endOnly=!1);return this},Pt.pointerMoveTolerance=function(e){return I(e)?(d.pointerMoveTolerance=e,this):d.pointerMoveTolerance},Pt.maxInteractions=function(e){return I(e)?(w=e,this):w},Ft(e);if(!(L in Element.prototype)||!F(Element.prototype[L]))A=function(e,t,n){n=n||e.parentNode.querySelectorAll(t);for(var r=0,i=n.length;r<i;r++)if(n[r]===e)return!0;return!1};(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)O=window[t[n]+"RequestAnimationFrame"],M=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];O||(O=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=window.setTimeout(function(){t(n+r)},r);return e=n+r,i}),M||(M=function(e){clearTimeout(e)})})(),typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=Pt),exports.interact=Pt):typeof define=="function"&&define.amd?define("interact",[],function(){return Pt}):window.interact=Pt})();