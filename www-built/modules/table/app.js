define(["d3","app/filepicker"],function(e,t){return function(n,r){function s(t){function o(){var t=document.querySelector("#t_selectText").checked,n=e.select("#t_selectedWordsText"),r=e.select("#t_selectedWordsExported");n.attr("disabled",t?null:!0),r.style("color",t?"grey":"black");var i=n.node().value;i&&(i=i.split(","));var s=t?i:r.datum();s&&f(s)}function u(e,t){var n=0,r=0,i=[];while(n<e.length&&r<t.length)e[n]==t[r]&&i.push(e[n]),e[n]<t[r]?n++:r++;return i}function a(e){var t=e[0];for(i=1;i<e.length;i++)t=u(t,e[i]);return t}function f(e){s.select("#t_wordList").text(e),s.selectAll("tr").remove();var n=e.map(function(e){return t[e]}),r=a(n);s.selectAll("tr").data(r).enter().append("tr").text(function(e){return e})}var s=e.select(n).select("table");s.empty()&&(s=e.select(n).append("table"),s.append("thead").html("Shared contexts: <span id=t_wordList>")),e.selectAll("#t_selectText, #t_selectExported").attr("disabled",null).on("click",o),e.select("#t_selectedWordsText").on("change",function(){var t=e.event.target.value;f(t.split(","))}),r.on_init("wordlist",function(t){e.select("#t_selectedWordsExported").text(t).datum(t),document.querySelector("#t_selectExported").checked&&f(t)})}e.select("#t_dataFile").call(t(),["brown-contexts.json"],s,JSON.parse)}});